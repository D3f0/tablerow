<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
    <script src="jquery-1.5.min.js" type="text/javascript"></script>
    <style type="text/css" rel="stylehseet">
        body {
            font-family: "Verdana";

        }

    </style>
    <script type="text/javascript">
        if (!window.console) {
            window.console = {};
            window.console.log = function(){};
        }
        function borrar_fila(link){
            var tabla = $(link).parents('table');
            // Si hay más de 3 (cabecera, fila, fila agregar nueva fila)...
            if ($(tabla).find('tr').length > 3) {
                console.log('Borrando');
                $(link).parents('tr').fadeOut(function () {
                    $(this).remove();
                });
            } else {
                alert("No se puede borrar la única fila");

            }
            return false;
        }

    </script>
    
    
</head>
<body>
    <h1>Agregar filas</h1>
    <table id="la_tabla">

        <thead>
            <tr>
                <th>Nombre</th>
                <th>Categoría</th>
                <th>Sexo</th>
                <th>Borrar</th>
            </tr>
            
        </thead>

        <tbody>
            <tr>
                <td>Nombre <input type="text" name="nombre"></td>
                <td>Categoría
                    <select value="">
                        <option value="">Sin categoría</option>
                        <option value="1">Categoría 1</option>
                        <option value="2">Categoría 2</option>
                    </select>
                </td>
                <td>
                <ul  style="float: left;">
                    <li><input type="radio" name="sex" value="h" /> Hombre</li>
                    <li><input type="radio" name="sex" value="m" /> Mujer</li>
                </ul>
                </td>
                <td>
                    <a href="borrar" onclick="return borrar_fila(this);">Borrar</a>
                </td>
            </tr>
            <tr>
                <td colspan="3" class="agregar">
                    <a href=""  id="agregar_fila">Agregar una fila nueva</a>
                </td>

            </tr>
            

        </tbody>
    </table>
</body>
<script type="text/javascript">
    $(function () {
        var tabla = $('#la_tabla');
        $('#agregar_fila').click(function (e) {
            e.preventDefault(); // Detener el evento para no seguir el link
            console.log("Agregar fila a ", tabla);
            var anteulitmo = $(tabla).find('tr:last').prev();
            var html_interno = $(anteulitmo).html();
            $(anteulitmo).after('<tr style="display: none">'+ html_interno+ '</tr>');
            // Ahora con efecto
            $(tabla).find('tr:last').prev().fadeIn('slow', function () {
                $(this).find('input[type=text]').focus();
            });
        });
     });
</script>
</html>
